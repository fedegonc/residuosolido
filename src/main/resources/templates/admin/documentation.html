<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DocumentaciÃ³n - Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body th:replace="~{fragments/admin-layout :: layout(~{::main})}">
<main>
  <!-- Header -->
  <div class="bg-gray-50 px-4 py-5 border-b border-gray-200 sm:px-6">
    <div class="-ml-4 -mt-2 flex items-center justify-between flex-wrap sm:flex-nowrap">
      <div class="ml-4 mt-2">
        <h3 class="text-2xl font-bold leading-6 text-gray-900">DocumentaciÃ³n del Sistema</h3>
        <p class="mt-1 text-sm text-gray-500">GuÃ­as y manuales de administraciÃ³n</p>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="bg-white shadow rounded-lg">
      <div class="px-6 py-6">
        <h2 class="text-lg font-medium text-gray-900 mb-4">Manual de Administrador</h2>
        
        <div class="prose max-w-none">
          <h3>AnÃ¡lisis de Madurez ArquitectÃ³nica</h3>
          
          <div class="overflow-x-auto mb-8">
            <table class="min-w-full bg-white border border-gray-200 text-sm">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Dominio</th>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Entidad</th>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Repositorio</th>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Servicio</th>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Controlador</th>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Templates</th>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Roles</th>
                  <th class="px-3 py-2 text-left font-medium text-gray-900 border-b">Madurez</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200">
                <tr class="bg-blue-50"><td colspan="8" class="px-3 py-2 font-semibold text-blue-900">ADMIN CORE</td></tr>
                <tr><td class="px-3 py-1">Users</td><td class="px-3 py-1">User âœ…</td><td class="px-3 py-1">UserRepository âœ…</td><td class="px-3 py-1">UserService âœ…</td><td class="px-3 py-1">AdminUserController âœ…</td><td class="px-3 py-1">admin/users/* âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-green-100 text-green-800 px-2 py-1 rounded">ğŸŸ¢ 1:1:1:1</span></td></tr>
                <tr><td class="px-3 py-1">Posts</td><td class="px-3 py-1">Post âœ…</td><td class="px-3 py-1">PostRepository âœ…</td><td class="px-3 py-1">PostService âœ…</td><td class="px-3 py-1">AdminPostController âœ…</td><td class="px-3 py-1">admin/posts.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-green-100 text-green-800 px-2 py-1 rounded">ğŸŸ¢ 1:1:1:1</span></td></tr>
                <tr><td class="px-3 py-1">Categories</td><td class="px-3 py-1">Category âœ…</td><td class="px-3 py-1">CategoryRepository âœ…</td><td class="px-3 py-1">CategoryService âœ…</td><td class="px-3 py-1">AdminCategoryController âœ…</td><td class="px-3 py-1">admin/edit-category.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-green-100 text-green-800 px-2 py-1 rounded">ğŸŸ¢ 1:1:1:1</span></td></tr>
                <tr><td class="px-3 py-1">Materials</td><td class="px-3 py-1">Material âœ…</td><td class="px-3 py-1">MaterialRepository âœ…</td><td class="px-3 py-1">MaterialService âœ…</td><td class="px-3 py-1">AdminMaterialController âœ…</td><td class="px-3 py-1">admin/materials.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-green-100 text-green-800 px-2 py-1 rounded">ğŸŸ¢ 1:1:1:1</span></td></tr>
                <tr><td class="px-3 py-1">Requests</td><td class="px-3 py-1">Request âœ…</td><td class="px-3 py-1">RequestRepository âœ…</td><td class="px-3 py-1">RequestService âœ…</td><td class="px-3 py-1">AdminRequestController âœ…</td><td class="px-3 py-1">admin/requests.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-green-100 text-green-800 px-2 py-1 rounded">ğŸŸ¢ 1:1:1:1</span></td></tr>
                <tr><td class="px-3 py-1">Feedback</td><td class="px-3 py-1">Feedback âœ…</td><td class="px-3 py-1">FeedbackRepository âœ…</td><td class="px-3 py-1">FeedbackService âœ…</td><td class="px-3 py-1">AdminFeedbackController âœ…</td><td class="px-3 py-1">admin/feedback.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-green-100 text-green-800 px-2 py-1 rounded">ğŸŸ¢ 1:1:1:1</span></td></tr>
                <tr class="bg-yellow-50"><td colspan="8" class="px-3 py-2 font-semibold text-yellow-900">ADMIN UTILS</td></tr>
                <tr><td class="px-3 py-1">Config</td><td class="px-3 py-1">SiteConfig âŒ</td><td class="px-3 py-1">âŒ</td><td class="px-3 py-1">ConfigService âœ…</td><td class="px-3 py-1">AdminConfigController âœ…</td><td class="px-3 py-1">admin/config.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded">ğŸŸ¡ 0:0:1:1</span></td></tr>
                <tr><td class="px-3 py-1">Documentation</td><td class="px-3 py-1">âŒ</td><td class="px-3 py-1">âŒ</td><td class="px-3 py-1">âŒ</td><td class="px-3 py-1">AdminDocumentationController âœ…</td><td class="px-3 py-1">admin/documentation.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded">ğŸŸ¡ 0:0:0:1</span></td></tr>
                <tr><td class="px-3 py-1">Password Reset</td><td class="px-3 py-1">PasswordResetRequest âœ…</td><td class="px-3 py-1">PasswordResetRequestRepository âœ…</td><td class="px-3 py-1">PasswordResetRequestService âœ…</td><td class="px-3 py-1">AdminPasswordResetController âœ…</td><td class="px-3 py-1">admin/password-reset-requests.html âœ…</td><td class="px-3 py-1">ADMIN</td><td class="px-3 py-1"><span class="bg-green-100 text-green-800 px-2 py-1 rounded">ğŸŸ¢ 1:1:1:1</span></td></tr>
              </tbody>
            </table>
          </div>

          <h3>Arquitectura y ConfiguraciÃ³n TÃ©cnica</h3>
          
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <div class="bg-gray-50 p-4 rounded-lg">
              <h4 class="font-semibold text-gray-900 mb-2">Stack Principal</h4>
              <div class="text-sm space-y-1">
                <div>Spring Boot 3.2.0 + Java 17</div>
                <div>PostgreSQL + Spring Security 6</div>
                <div>Thymeleaf + Tailwind CSS</div>
                <div>Cloudinary + DevTools</div>
              </div>
            </div>
            
            <div class="bg-green-50 p-4 rounded-lg">
              <h4 class="font-semibold text-green-900 mb-2">âœ… Principios Aplicados</h4>
              <div class="text-sm space-y-1 text-green-800">
                <div>â€¢ KISS: EliminaciÃ³n sobreingenierÃ­a</div>
                <div>â€¢ DRY: Fragmentos + layouts</div>
                <div>â€¢ YAGNI: MVP enfocado</div>
                <div>â€¢ Servicios 1:1 por entidad</div>
              </div>
            </div>
            
            <div class="bg-red-50 p-4 rounded-lg">
              <h4 class="font-semibold text-red-900 mb-2">âŒ Pendiente SOLID</h4>
              <div class="text-sm space-y-1 text-red-800">
                <div>â€¢ Interfaces para servicios</div>
                <div>â€¢ Constructor injection</div>
                <div>â€¢ LÃ³gica fuera de controladores</div>
                <div>â€¢ Abstracciones vs implementaciones</div>
              </div>
            </div>
          </div>

          <div class="bg-blue-50 p-4 rounded-lg mb-6">
            <h4 class="font-semibold text-blue-900 mb-3">Patrones de DiseÃ±o y TÃ©cnicas Implementadas</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
              <div>
                <h5 class="font-medium text-blue-800 mb-2">ğŸ—ï¸ Patrones ArquitectÃ³nicos</h5>
                <ul class="space-y-1 text-blue-700">
                  <li>â€¢ <strong>MVC:</strong> SeparaciÃ³n Model-View-Controller</li>
                  <li>â€¢ <strong>Repository:</strong> AbstracciÃ³n acceso a datos</li>
                  <li>â€¢ <strong>Service Layer:</strong> LÃ³gica de negocio centralizada</li>
                  <li>â€¢ <strong>DTO:</strong> UserForm para transferencia datos</li>
                  <li>â€¢ <strong>Dependency Injection:</strong> Spring IoC container</li>
                </ul>
              </div>
              <div>
                <h5 class="font-medium text-blue-800 mb-2">ğŸ”§ TÃ©cnicas Anti-RepeticiÃ³n</h5>
                <ul class="space-y-1 text-blue-700">
                  <li>â€¢ <strong>Fragmentos Thymeleaf:</strong> Layouts reutilizables</li>
                  <li>â€¢ <strong>ConsolidaciÃ³n:</strong> 7â†’2 controladores admin</li>
                  <li>â€¢ <strong>Herencia CSS:</strong> Tailwind utilities</li>
                  <li>â€¢ <strong>ConfiguraciÃ³n:</strong> Profiles (dev/test/prod)</li>
                  <li>â€¢ <strong>EliminaciÃ³n duplicados:</strong> PasswordResetService</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="bg-yellow-50 p-4 rounded-lg mb-6">
            <h4 class="font-semibold text-yellow-900 mb-2">ğŸ¯ Roadmap Arquitectura Limpia</h4>
            <div class="text-sm text-yellow-800">
              <strong>PrÃ³ximas mejoras:</strong> Crear interfaces para servicios â†’ Implementar constructor injection â†’ 
              Extraer lÃ³gica de controladores â†’ Agregar validaciÃ³n centralizada â†’ Implementar paginaciÃ³n
            </div>
          </div>

          <h3>Casos de Uso Funcionales</h3>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
            <!-- ADMIN CORE -->
            <div class="bg-blue-50 p-4 rounded-lg">
              <h4 class="font-semibold text-blue-900 mb-2">ğŸ‘¥ GestiÃ³n de Usuarios</h4>
              <div class="text-sm text-blue-800">
                CRUD completo â€¢ Roles (ADMIN/ORG/USER) â€¢ Perfiles â€¢ UbicaciÃ³n
              </div>
            </div>
            
            <div class="bg-green-50 p-4 rounded-lg">
              <h4 class="font-semibold text-green-900 mb-2">ğŸ“ Posts y CategorÃ­as</h4>
              <div class="text-sm text-green-800">
                Contenido pÃºblico â€¢ Cloudinary â€¢ CategorizaciÃ³n â€¢ Editor completo
              </div>
            </div>
            
            <div class="bg-purple-50 p-4 rounded-lg">
              <h4 class="font-semibold text-purple-900 mb-2">ğŸ“‹ Solicitudes</h4>
              <div class="text-sm text-purple-800">
                RecolecciÃ³n residuos â€¢ AsignaciÃ³n organizaciones â€¢ Estados â€¢ Reportes
              </div>
            </div>
            
            <div class="bg-orange-50 p-4 rounded-lg">
              <h4 class="font-semibold text-orange-900 mb-2">ğŸ—‚ï¸ Materiales</h4>
              <div class="text-sm text-orange-800">
                Tipos reciclables â€¢ Descripciones â€¢ AsignaciÃ³n organizaciones
              </div>
            </div>
            
            <div class="bg-pink-50 p-4 rounded-lg">
              <h4 class="font-semibold text-pink-900 mb-2">ğŸ’¬ Feedback</h4>
              <div class="text-sm text-pink-800">
                Comentarios usuarios â€¢ Respuestas â€¢ Estado procesado
              </div>
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg">
              <h4 class="font-semibold text-gray-900 mb-2">âš™ï¸ ConfiguraciÃ³n</h4>
              <div class="text-sm text-gray-800">
                Imagen hero â€¢ Textos â€¢ ParÃ¡metros â€¢ Reset contraseÃ±as
              </div>
            </div>
          </div>

          <!-- ROLES Y PERMISOS -->
          <div class="bg-indigo-50 p-4 rounded-lg mb-6">
            <h4 class="font-semibold text-indigo-900 mb-3">ğŸ” Roles y Permisos del Sistema</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
              <div>
                <h5 class="font-medium text-red-800 mb-1">âš™ï¸ ADMIN</h5>
                <div class="text-red-700">Acceso total â€¢ GestiÃ³n usuarios â€¢ ConfiguraciÃ³n sistema â€¢ Reportes</div>
              </div>
              <div>
                <h5 class="font-medium text-blue-800 mb-1">ğŸ¢ ORGANIZATION</h5>
                <div class="text-blue-700">GestiÃ³n materiales â€¢ Procesar solicitudes â€¢ Dashboard propio</div>
              </div>
              <div>
                <h5 class="font-medium text-green-800 mb-1">ğŸ‘¤ USER</h5>
                <div class="text-green-700">Crear solicitudes â€¢ Ver estado â€¢ Perfil personal</div>
              </div>
            </div>
          </div>

          <!-- ANÃLISIS CRÃTICO DEL SISTEMA -->
          <div class="bg-red-50 border border-red-200 rounded-lg p-6 mb-6">
            <h3 class="text-red-900 font-bold text-xl mb-4">ğŸš¨ AnÃ¡lisis CrÃ­tico del Sistema</h3>
            
            <!-- ANTIPATRONES BACKEND -->
            <div class="mb-6">
              <h4 class="font-semibold text-red-800 mb-3">âŒ Antipatrones Backend</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div class="bg-white p-3 rounded border-l-4 border-red-400">
                  <h5 class="font-medium text-red-700 mb-1">God Objects</h5>
                  <div class="text-red-600">User.java (111 lÃ­neas) â€¢ AdminController (mÃºltiples responsabilidades) â€¢ Campos deprecated mezclados</div>
                </div>
                <div class="bg-white p-3 rounded border-l-4 border-red-400">
                  <h5 class="font-medium text-red-700 mb-1">DuplicaciÃ³n Masiva</h5>
                  <div class="text-red-600">17 controladores admin â€¢ Material + Category similares â€¢ LÃ³gica repetida en servicios</div>
                </div>
                <div class="bg-white p-3 rounded border-l-4 border-red-400">
                  <h5 class="font-medium text-red-700 mb-1">Acoplamiento Alto</h5>
                  <div class="text-red-600">Controladores con lÃ³gica de negocio â€¢ Sin interfaces â€¢ Dependencias directas</div>
                </div>
                <div class="bg-white p-3 rounded border-l-4 border-red-400">
                  <h5 class="font-medium text-red-700 mb-1">Inconsistencia</h5>
                  <div class="text-red-600">Campos legacy (@Deprecated) â€¢ Relaciones @Transient â€¢ ValidaciÃ³n dispersa</div>
                </div>
              </div>
            </div>

            <!-- ANTIPATRONES FRONTEND -->
            <div class="mb-6">
              <h4 class="font-semibold text-orange-800 mb-3">ğŸ¨ Antipatrones Frontend</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div class="bg-white p-3 rounded border-l-4 border-orange-400">
                  <h5 class="font-medium text-orange-700 mb-1">FragmentaciÃ³n Excesiva</h5>
                  <div class="text-orange-600">70+ templates â€¢ Un archivo por CRUD â€¢ DuplicaciÃ³n de layouts</div>
                </div>
                <div class="bg-white p-3 rounded border-l-4 border-orange-400">
                  <h5 class="font-medium text-orange-700 mb-1">Inconsistencia Visual</h5>
                  <div class="text-orange-600">MÃºltiples patrones CSS â€¢ Colores hardcodeados â€¢ Sin design system</div>
                </div>
                <div class="bg-white p-3 rounded border-l-4 border-orange-400">
                  <h5 class="font-medium text-orange-700 mb-1">Archivos Innecesarios</h5>
                  <div class="text-orange-600">Templates vacÃ­os â€¢ Archivos de testing â€¢ Fragments no utilizados</div>
                </div>
                <div class="bg-white p-3 rounded border-l-4 border-orange-400">
                  <h5 class="font-medium text-orange-700 mb-1">ValidaciÃ³n Duplicada</h5>
                  <div class="text-orange-600">JavaScript repetido â€¢ ValidaciÃ³n cliente/servidor desincronizada</div>
                </div>
              </div>
            </div>

            <!-- IMPACTO EN MANTENIBILIDAD -->
            <div class="mb-6">
              <h4 class="font-semibold text-purple-800 mb-3">ğŸ”§ Impacto en Mantenibilidad</h4>
              <div class="bg-white p-4 rounded">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                  <div>
                    <h5 class="font-medium text-purple-700 mb-2">Alto Costo de Cambio</h5>
                    <ul class="text-purple-600 space-y-1">
                      <li>â€¢ Modificar User requiere 5+ archivos</li>
                      <li>â€¢ Cambios UI afectan mÃºltiples templates</li>
                      <li>â€¢ Sin tests unitarios</li>
                    </ul>
                  </div>
                  <div>
                    <h5 class="font-medium text-purple-700 mb-2">Debugging Complejo</h5>
                    <ul class="text-purple-600 space-y-1">
                      <li>â€¢ LÃ³gica dispersa en controladores</li>
                      <li>â€¢ Relaciones @Transient ocultas</li>
                      <li>â€¢ Sin logging centralizado</li>
                    </ul>
                  </div>
                  <div>
                    <h5 class="font-medium text-purple-700 mb-2">Onboarding Lento</h5>
                    <ul class="text-purple-600 space-y-1">
                      <li>â€¢ 70+ archivos para entender</li>
                      <li>â€¢ Patrones inconsistentes</li>
                      <li>â€¢ DocumentaciÃ³n dispersa</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- ESCALABILIDAD -->
            <div class="mb-6">
              <h4 class="font-semibold text-blue-800 mb-3">ğŸ“ˆ Limitaciones de Escalabilidad</h4>
              <div class="bg-white p-4 rounded">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <h5 class="font-medium text-blue-700 mb-2">Problemas TÃ©cnicos</h5>
                    <ul class="text-blue-600 text-sm space-y-1">
                      <li>â€¢ Sin paginaciÃ³n en listas</li>
                      <li>â€¢ Carga eager sin optimizaciÃ³n</li>
                      <li>â€¢ Sin cachÃ© implementado</li>
                      <li>â€¢ BÃºsquedas sin Ã­ndices</li>
                      <li>â€¢ Sin rate limiting</li>
                    </ul>
                  </div>
                  <div>
                    <h5 class="font-medium text-blue-700 mb-2">Arquitectura MonolÃ­tica</h5>
                    <ul class="text-blue-600 text-sm space-y-1">
                      <li>â€¢ Todo en un solo JAR</li>
                      <li>â€¢ Sin separaciÃ³n de dominios</li>
                      <li>â€¢ Base de datos Ãºnica</li>
                      <li>â€¢ Sin APIs REST documentadas</li>
                      <li>â€¢ Deployment atÃ³mico</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- RECOMENDACIONES MVP -->
            <div>
              <h4 class="font-semibold text-green-800 mb-3">âœ… Recomendaciones MVP (KISS/DRY/SOLID)</h4>
              <div class="bg-white p-4 rounded">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                  <div>
                    <h5 class="font-medium text-green-700 mb-2">Prioridad Alta (Semana 1)</h5>
                    <ul class="text-green-600 space-y-1">
                      <li>â€¢ Consolidar controladores admin (7â†’2)</li>
                      <li>â€¢ Unificar templates CRUD similares</li>
                      <li>â€¢ Extraer interfaces de servicios</li>
                      <li>â€¢ Implementar paginaciÃ³n bÃ¡sica</li>
                      <li>â€¢ Agregar validaciÃ³n centralizada</li>
                    </ul>
                  </div>
                  <div>
                    <h5 class="font-medium text-green-700 mb-2">Prioridad Media (Semana 2-3)</h5>
                    <ul class="text-green-600 space-y-1">
                      <li>â€¢ Refactorizar User.java (SRP)</li>
                      <li>â€¢ Crear design system Tailwind</li>
                      <li>â€¢ Implementar DTOs para APIs</li>
                      <li>â€¢ Agregar tests unitarios bÃ¡sicos</li>
                      <li>â€¢ Documentar APIs con Swagger</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- BASE DE DATOS -->
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6">
            <h3 class="text-gray-900 font-bold text-xl mb-4">ğŸ—„ï¸ Estructura de Base de Datos</h3>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- TABLAS PRINCIPALES -->
              <div>
                <h4 class="font-semibold text-gray-800 mb-3">Tablas Principales</h4>
                <div class="space-y-3 text-sm">
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-blue-700">users</h5>
                    <div class="text-gray-600 mt-1">
                      id, username, email, password, role, firstName, lastName, 
                      direccion, latitud, longitud, referencias, createdAt, active
                    </div>
                  </div>
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-green-700">requests</h5>
                    <div class="text-gray-600 mt-1">
                      id, user_id, description, collectionAddress, scheduledDate, 
                      status, notes, createdAt, updatedAt
                    </div>
                  </div>
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-purple-700">materials</h5>
                    <div class="text-gray-600 mt-1">
                      id, name, description, category, active
                    </div>
                  </div>
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-orange-700">posts</h5>
                    <div class="text-gray-600 mt-1">
                      id, title, content, imageUrl, category_id, createdAt, updatedAt
                    </div>
                  </div>
                </div>
              </div>

              <!-- RELACIONES -->
              <div>
                <h4 class="font-semibold text-gray-800 mb-3">Relaciones Many-to-Many</h4>
                <div class="space-y-3 text-sm">
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-indigo-700">user_materials</h5>
                    <div class="text-gray-600 mt-1">user_id, material_id</div>
                  </div>
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-indigo-700">request_materials</h5>
                    <div class="text-gray-600 mt-1">request_id, material_id</div>
                  </div>
                </div>

                <h4 class="font-semibold text-gray-800 mb-3 mt-6">Tablas Auxiliares</h4>
                <div class="space-y-3 text-sm">
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-gray-700">categories</h5>
                    <div class="text-gray-600 mt-1">id, name, description</div>
                  </div>
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-gray-700">feedback</h5>
                    <div class="text-gray-600 mt-1">id, user_id, message, createdAt</div>
                  </div>
                  <div class="bg-white p-3 rounded border">
                    <h5 class="font-medium text-gray-700">password_reset_requests</h5>
                    <div class="text-gray-600 mt-1">id, email, token, status, createdAt</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- DIAGRAMAS -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
            <h3 class="text-blue-900 font-bold text-xl mb-4">ğŸ“Š Diagramas del Sistema</h3>
            
            <!-- CASOS DE USO -->
            <div class="mb-6">
              <h4 class="font-semibold text-blue-800 mb-3">Casos de Uso Principales</h4>
              <div class="bg-white p-4 rounded border text-sm font-mono">
                <pre>
    [Usuario] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚
         â”œâ”€â”€ Registrarse    â”‚
         â”œâ”€â”€ Iniciar SesiÃ³n â”‚
         â”œâ”€â”€ Crear Solicitudâ”‚ â”€â”€â”€â”€ [Sistema]
         â””â”€â”€ Ver Estado     â”‚         â”‚
                           â”‚         â”œâ”€â”€ Validar Datos
    [OrganizaciÃ³n] â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€ Asignar Solicitud
         â”‚                  â”‚         â”œâ”€â”€ Notificar Estado
         â”œâ”€â”€ Ver Solicitudesâ”‚         â””â”€â”€ Generar Reportes
         â”œâ”€â”€ Procesar       â”‚
         â””â”€â”€ Actualizar     â”‚
                           â”‚
    [Admin] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ Gestionar Usuarios
         â”œâ”€â”€ Configurar Sistema
         â”œâ”€â”€ Ver Reportes
         â””â”€â”€ Moderar Contenido
                </pre>
              </div>
            </div>

            <!-- DIAGRAMA DE CLASES SIMPLIFICADO -->
            <div class="mb-6">
              <h4 class="font-semibold text-blue-800 mb-3">Diagrama de Clases (Core)</h4>
              <div class="bg-white p-4 rounded border text-sm font-mono">
                <pre>
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    User     â”‚    â”‚   Request   â”‚    â”‚  Material   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ id: Long    â”‚â—„â”€â”€â”¤ user: User   â”‚    â”‚ id: Long    â”‚
    â”‚ username    â”‚    â”‚ description â”‚    â”‚ name        â”‚
    â”‚ email       â”‚    â”‚ status      â”‚    â”‚ description â”‚
    â”‚ role: Role  â”‚    â”‚ createdAt   â”‚    â”‚ category    â”‚
    â”‚ direccion   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ active      â”‚
    â”‚ latitud     â”‚           â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ longitud    â”‚           â”‚                  â–²
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                  â”‚
           â”‚                  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚request_     â”‚
           â”‚                              â”‚materials    â”‚
           â”‚                              â”‚(join table) â”‚
           â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚user_        â”‚
    â”‚materials    â”‚
    â”‚(join table) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>
              </div>
            </div>

            <!-- SECUENCIA DE SOLICITUD -->
            <div>
              <h4 class="font-semibold text-blue-800 mb-3">Secuencia: Crear Solicitud de RecolecciÃ³n</h4>
              <div class="bg-white p-4 rounded border text-sm font-mono">
                <pre>
Usuario          UserController    RequestService    Database
  â”‚                    â”‚                â”‚              â”‚
  â”‚ POST /requests     â”‚                â”‚              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚              â”‚
  â”‚                    â”‚ createRequest()â”‚              â”‚
  â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚
  â”‚                    â”‚                â”‚ save()       â”‚
  â”‚                    â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                    â”‚                â”‚              â”‚
  â”‚                    â”‚                â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
  â”‚ redirect:/requests â”‚                â”‚              â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚              â”‚
  â”‚                    â”‚                â”‚              â”‚
  â”‚                    â”‚ [Async]        â”‚              â”‚
  â”‚                    â”‚ notifyOrgs()   â”‚              â”‚
  â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚
  â”‚                    â”‚                â”‚              â”‚

Flujo: 
1. Usuario completa formulario
2. Controller valida datos
3. Service procesa y guarda
4. NotificaciÃ³n asÃ­ncrona a organizaciones
5. Redirect a lista de solicitudes
                </pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
</body>
</html>
