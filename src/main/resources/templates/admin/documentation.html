<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Documentaci√≥n - Admin</title>
    <meta name="_csrf" th:if="${_csrf != null}" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:if="${_csrf != null}" th:content="${_csrf.headerName}"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body {
            font-family: 'Nunito', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
            background-color: white;
        }
        .card {
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }
        .card:hover {
            box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
        }
        .section-card {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border: 1px solid #e2e8f0;
        }
    </style>
</head>
<body th:replace="~{fragments/admin-layout :: layout(~{::main})}">
<main>
    <!-- Breadcrumbs -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
        <th:block th:replace="~{fragments/components/breadcrumbs :: auto}"></th:block>
    </div>

    <!-- Messages -->
    <div th:if="${successMessage}" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
        <div class="bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg">
            <div class="flex items-center">
                <i data-lucide="check-circle" class="w-5 h-5 mr-2"></i>
                <span th:text="${successMessage}"></span>
            </div>
        </div>
    </div>

    <div th:if="${errorMessage}" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
        <div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg">
            <div class="flex items-center">
                <i data-lucide="alert-circle" class="w-5 h-5 mr-2"></i>
                <span th:text="${errorMessage}"></span>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="max-w-7xl mx-auto px-4 py-10">

        <!-- Header -->
        <div class="text-left mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">üìò Documentaci√≥n del Sistema</h1>
            <p class="text-lg text-gray-600 max-w-2xl">Sistema de Gesti√≥n de Residuos S√≥lidos</p>
            <p class="text-gray-700 max-w-3xl mt-3">
                Informaci√≥n completa sobre arquitectura, patrones de desarrollo, funcionalidades implementadas y gu√≠as t√©cnicas.
            </p>
        </div>

        <!-- Quick Links -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Enlaces externos</h2>
            <ul class="space-y-2">
                <li class="flex items-center">
                    <a href="https://github.com/fedegonc/residuosolido" target="_blank" class="text-blue-600 hover:text-blue-800 flex items-center">
                        <i data-lucide="external-link" class="w-4 h-4 mr-2"></i>
                        C√≥digo Fuente (GitHub)
                    </a>
                </li>
                <li class="flex items-center">
                    <a href="https://docs.google.com/document/d/1dmRmQLjPEDT7MyUo6T9owJP3ZLOeFK-kv7WIA4BQihY/edit?tab=t.0" target="_blank" class="text-blue-600 hover:text-blue-800 flex items-center">
                        <i data-lucide="external-link" class="w-4 h-4 mr-2"></i>
                        Art√≠culo t√©cnico
                    </a>
                </li>
                <li class="flex items-center text-gray-500">
                    <i data-lucide="file-text" class="w-4 h-4 mr-2"></i>
                    Gu√≠a T√©cnica (En desarrollo)
                </li>
                <li class="flex items-center">
                    <a href="https://docs.google.com/document/d/1CdG2M1nPxRI_MQ-ROP7RXtTozYTPpE8Q14qluDhW4kA/edit?tab=t.0#heading=h.pwph5y4zizfi" target="_blank" class="text-blue-600 hover:text-blue-800 flex items-center">
                        <i data-lucide="external-link" class="w-4 h-4 mr-2"></i>
                        Documento de requerimientos
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Left Column - Core Information -->
            <div class="space-y-6">

                <!-- 1. Introducci√≥n -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="book-open" class="w-5 h-5 text-blue-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">1. Introducci√≥n</h2>
                    </div>
                    <p class="text-gray-700 leading-relaxed text-sm">
                        Documentaci√≥n completa del sistema de gesti√≥n de residuos s√≥lidos. Incluye arquitectura, patrones de desarrollo y gu√≠as t√©cnicas.
                    </p>
                </div>

                <!-- 2. Roles del Sistema -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="shield" class="w-5 h-5 text-red-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">2. Roles</h2>
                    </div>
                    <div class="space-y-3">
                        <div class="flex items-center">
                            <i data-lucide="settings" class="w-4 h-4 text-red-600 mr-2"></i>
                            <span class="text-sm font-medium text-red-800">ADMIN</span>
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="building" class="w-4 h-4 text-blue-600 mr-2"></i>
                            <span class="text-sm font-medium text-blue-800">ORGANIZATION</span>
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="user" class="w-4 h-4 text-green-600 mr-2"></i>
                            <span class="text-sm font-medium text-green-800">USER</span>
                        </div>
                    </div>
                </div>

                <!-- 3. Stack Tecnol√≥gico -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="cpu" class="w-5 h-5 text-purple-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">3. Stack</h2>
                    </div>
                    <div class="space-y-2">
                        <div class="text-xs">
                            <span class="font-medium text-gray-800">Backend:</span> Spring Boot 3.2 + Java 17
                        </div>
                        <div class="text-xs">
                            <span class="font-medium text-gray-800">Frontend:</span> Thymeleaf + Tailwind
                        </div>
                        <div class="text-xs">
                            <span class="font-medium text-gray-800">DB:</span> PostgreSQL + JPA
                        </div>
                        <div class="text-xs">
                            <span class="font-medium text-gray-800">Images:</span> Cloudinary
                        </div>
                    </div>
                </div>

                <!-- 4. Arquitectura -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="layers" class="w-5 h-5 text-indigo-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">4. Arquitectura</h2>
                    </div>
                    <div class="space-y-3">
                        <div class="bg-indigo-50 p-3 rounded">
                            <div class="text-sm font-medium text-indigo-800 mb-1">Patr√≥n MVC (Model-View-Controller)</div>
                            <div class="text-xs text-indigo-700">
                                Arquitectura tradicional de Spring Boot con separaci√≥n clara de responsabilidades
                            </div>
                        </div>
                        <div class="space-y-2">
                            <div class="flex items-start">
                                <i data-lucide="database" class="w-4 h-4 text-blue-600 mr-2 mt-0.5"></i>
                                <div>
                                    <div class="text-sm font-medium text-blue-800">Modelo</div>
                                    <div class="text-xs text-gray-600">Entidades JPA + Repositorios + L√≥gica de negocio</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <i data-lucide="settings" class="w-4 h-4 text-green-600 mr-2 mt-0.5"></i>
                                <div>
                                    <div class="text-sm font-medium text-green-800">Controlador</div>
                                    <div class="text-xs text-gray-600">@Controller + @Service para manejo de requests</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <i data-lucide="eye" class="w-4 h-4 text-purple-600 mr-2 mt-0.5"></i>
                                <div>
                                    <div class="text-sm font-medium text-purple-800">Vista</div>
                                    <div class="text-xs text-gray-600">Templates Thymeleaf para renderizado</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Middle Column - Features & Patterns -->
            <div class="space-y-6">

                <!-- 5. Funcionalidades -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="target" class="w-5 h-5 text-blue-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">5. Funcionalidades</h2>
                    </div>
                    <div class="grid grid-cols-1 gap-2">
                        <div class="flex items-center text-sm">
                            <i data-lucide="check-circle" class="w-4 h-4 text-green-600 mr-2"></i>
                            Gesti√≥n de usuarios
                        </div>
                        <div class="flex items-center text-sm">
                            <i data-lucide="check-circle" class="w-4 h-4 text-green-600 mr-2"></i>
                            Sistema de solicitudes
                        </div>
                        <div class="flex items-center text-sm">
                            <i data-lucide="check-circle" class="w-4 h-4 text-green-600 mr-2"></i>
                            Cat√°logo de materiales
                        </div>
                        <div class="flex items-center text-sm">
                            <i data-lucide="check-circle" class="w-4 h-4 text-green-600 mr-2"></i>
                            Portal p√∫blico educativo
                        </div>
                        <div class="flex items-center text-sm">
                            <i data-lucide="check-circle" class="w-4 h-4 text-green-600 mr-2"></i>
                            Panel de administraci√≥n
                        </div>
                    </div>
                </div>

                <!-- 6. Patrones de Desarrollo -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="code-2" class="w-5 h-5 text-purple-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">6. Patrones</h2>
                    </div>
                    <div class="space-y-2">
                        <div class="bg-blue-50 p-2 rounded text-xs">
                            <span class="font-medium text-blue-800">Thin Controllers</span>
                        </div>
                        <div class="text-xs text-gray-600 mb-2">Controladores minimalistas que delegan l√≥gica</div>
                        <div class="bg-green-50 p-2 rounded text-xs">
                            <span class="font-medium text-green-800">Service Layer</span>
                        </div>
                        <div class="text-xs text-gray-600 mb-2">Separaci√≥n de l√≥gica de negocio</div>
                        <div class="bg-red-50 p-2 rounded text-xs">
                            <span class="font-medium text-red-800">Security First</span>
                        </div>
                        <div class="text-xs text-gray-600">Protecci√≥n con @PreAuthorize</div>
                    </div>
                </div>

                <!-- 7. Estado del Sistema -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">7. Estado</h2>
                    </div>
                    <div class="space-y-2 text-sm text-green-700">
                        <div class="flex items-center">
                            <i data-lucide="check-circle" class="w-4 h-4 mr-2"></i>
                            Layout admin homog√©neo
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="check-circle" class="w-4 h-4 mr-2"></i>
                            Breadcrumbs autom√°ticos
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="check-circle" class="w-4 h-4 mr-2"></i>
                            √çconos Lucide globales
                        </div>
                        <div class="flex items-center">
                            <i data-lucide="check-circle" class="w-4 h-4 mr-2"></i>
                            Estilos consistentes
                        </div>
                    </div>
                </div>

            </div>

            <!-- Right Column - Controllers & References -->
            <div class="space-y-6">

                <!-- 8. Controladores -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="settings" class="w-5 h-5 text-indigo-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">8. Controladores</h2>
                    </div>
                    <div class="grid grid-cols-2 gap-1 mb-3">
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs text-center">Admin</span>
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs text-center">User</span>
                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs text-center">Material</span>
                        <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs text-center">Request</span>
                        <span class="bg-teal-100 text-teal-800 px-2 py-1 rounded text-xs text-center">Feedback</span>
                        <span class="bg-indigo-100 text-indigo-800 px-2 py-1 rounded text-xs text-center">Post</span>
                    </div>
                    <p class="text-xs text-gray-600">CRUD completo con seguridad @PreAuthorize</p>
                </div>

                <!-- 9. Sistema de Breadcrumbs -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="navigation" class="w-5 h-5 text-indigo-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">9. Breadcrumbs</h2>
                    </div>
                    <div class="space-y-2">
                        <div class="bg-indigo-50 p-2 rounded text-xs">
                            <span class="font-medium text-indigo-800">BreadcrumbInterceptor</span>
                        </div>
                        <div class="text-xs text-gray-600">Generaci√≥n autom√°tica seg√∫n URL</div>
                        <div class="bg-blue-50 p-2 rounded text-xs mt-2">
                            <span class="font-medium text-blue-800">BreadcrumbService</span>
                        </div>
                        <div class="text-xs text-gray-600">Resuelve IDs din√°micos</div>
                    </div>
                </div>

                <!-- 10. Ejemplo: UserController -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="database" class="w-5 h-5 text-orange-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">10. CRUD Ejemplo</h2>
                    </div>
                    <div class="space-y-2">
                        <div class="text-xs font-medium text-blue-800">GET Mapping</div>
                        <div class="text-xs text-gray-600">Lista + acciones (?action=edit)</div>
                        <div class="text-xs font-medium text-green-800 mt-2">POST Mapping</div>
                        <div class="text-xs text-gray-600">Crear/actualizar con flash messages</div>
                    </div>
                </div>

                <!-- 11. Referencias -->
                <div class="card section-card rounded-lg p-6">
                    <div class="flex items-center mb-4">
                        <i data-lucide="link" class="w-5 h-5 text-orange-600 mr-3"></i>
                        <h2 class="text-xl font-bold text-gray-900">11. Referencias</h2>
                    </div>
                    <div class="space-y-3">
                        <div class="bg-blue-50 p-3 rounded">
                            <h4 class="font-medium text-blue-800 text-sm mb-2">Documentaci√≥n</h4>
                            <div class="space-y-1 text-xs text-blue-700">
                                <div>
                                    <a href="https://docs.google.com/document/d/1CdG2M1nPxRI_MQ-ROP7RXtTozYTPpE8Q14qluDhW4kA/edit?tab=t.0#heading=h.pwph5y4zizfi" target="_blank" class="text-blue-600 hover:underline flex items-center">
                                        <i data-lucide="external-link" class="w-3 h-3 mr-1"></i>
                                        Documento de requerimientos
                                    </a>
                                </div>
                                <div>Gu√≠a de implementaci√≥n (En desarrollo)</div>
                                <div>
                                    <a href="https://docs.google.com/document/d/1dmRmQLjPEDT7MyUo6T9owJP3ZLOeFK-kv7WIA4BQihY/edit?tab=t.0" target="_blank" class="text-blue-600 hover:underline flex items-center">
                                        <i data-lucide="external-link" class="w-3 h-3 mr-1"></i>
                                        Art√≠culo t√©cnico
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-50 p-3 rounded">
                            <h4 class="font-medium text-green-800 text-sm mb-2">Repositorio</h4>
                            <div class="space-y-1 text-xs text-green-700">
                                <div>
                                    <a href="https://github.com/fedegonc/residuosolido" target="_blank" class="text-green-600 hover:underline flex items-center">
                                        <i data-lucide="external-link" class="w-3 h-3 mr-1"></i>
                                        C√≥digo Spring Boot
                                    </a>
                                </div>
                                <div>Templates Thymeleaf</div>
                                <div>Scripts y estilos</div>
                            </div>
                        </div>
                        <div class="bg-purple-50 p-3 rounded">
                            <h4 class="font-medium text-purple-800 text-sm mb-2">Dependencias</h4>
                            <div class="text-xs text-purple-700 space-y-1">
                                <div>‚Ä¢ spring-boot-starter-web</div>
                                <div>‚Ä¢ postgresql + lombok</div>
                                <div>‚Ä¢ cloudinary-http44</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <!-- Navigation -->
        <div class="flex justify-center mt-8">
            <a th:href="@{/admin/dashboard}"
               class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2 text-sm font-medium">
                <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                <span>Ir al Dashboard</span>
            </a>
        </div>
    </div>
</main>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
    });
</script>
</body>
</html>
