  <section th:fragment="guestNotes" id="notes" class="py-12 md:py-16" xmlns:th="http://www.thymeleaf.org">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <header class="notes-header flex items-center justify-between gap-4 mb-6 md:mb-8">
      <h2 class="flex items-center gap-2">
        <svg aria-hidden="true"><use href="#posts"/></svg>
        <span th:text="#{notes.title}">Notas Recientes</span>
      </h2>
      <div th:replace="~{fragments/ui/button :: linkIcon(#{button.view}, '/posts', 'arrow', null)}"></div>
    </header>

    <div th:if="${posts != null and !posts.isEmpty()}" class="notes-grid grid grid-cols-12 gap-6 mt-6 md:mt-8 items-stretch">
      <article th:each="post : ${posts}" class="card card-media col-span-12 md:col-span-6 lg:col-span-4 h-full flex flex-col">
        <div class="card-media-thumb">
          <img th:if="${post != null and post.imageUrl != null and !post.imageUrl.isEmpty()}"
               th:src="${post.imageUrl}"
               th:alt="${post != null and !#strings.isEmpty(post.title) ? post.title : (!#strings.isEmpty(post.sourceName) ? post.sourceName : '')}"
               loading="lazy"
               decoding="async" />
          <div th:unless="${post != null and post.imageUrl != null and !post.imageUrl.isEmpty()}" class="card-media-fallback">
            <svg aria-hidden="true" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 01-2-2V9.5a2.5 2.5 0 00-2.5-2.5H15"></path>
            </svg>
          </div>
          <div class="card-media-overlay"></div>
          <div class="note-category">
            <span class="badge badge-green"
                  th:if="${post != null and post.categoryName != null and !#strings.isEmpty(post.categoryName)}"
                  th:text="${post.categoryName}">Categoría</span>
            <span class="badge badge-green"
                  th:unless="${post != null and post.categoryName != null and !#strings.isEmpty(post.categoryName)}"
                  th:text="#{category.uncategorized}">Sin categoría</span>
          </div>
        </div>
        <div class="card-body flex-1">
          <h3>
            <a th:if="${post != null and post.id != null}"
               th:href="@{/posts/{id}(id=${post.id})}"
               th:text="${!#strings.isEmpty(post.title) ? post.title : (!#strings.isEmpty(post.sourceName) ? post.sourceName : '...')}"
               th:title="${!#strings.isEmpty(post.title) ? post.title : (!#strings.isEmpty(post.sourceName) ? post.sourceName : '')}">Título de la Nota</a>
            <span th:unless="${post != null and post.id != null}"
                  th:text="${post != null and !#strings.isEmpty(post.title) ? post.title : (!#strings.isEmpty(post.sourceName) ? post.sourceName : '...')}">Título</span>
          </h3>
          <p th:text="${post != null and !#strings.isEmpty(post.content) ? #strings.abbreviate(post.content, 120) : ''}">Contenido de la nota...</p>
          <footer class="card-footer">
            <small><span th:text="#{notes.published_recently}">Publicado recientemente</span></small>
            <a th:if="${post != null and post.id != null}"
               th:href="@{/posts/{id}(id=${post.id})}"
               class="read-more">
              <span th:text="#{notes.read_more}">Leer más</span>
              <svg aria-hidden="true" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </a>
          </footer>
        </div>
      </article>
    </div>

    <div th:if="${posts == null or posts.isEmpty()}" class="empty-state mt-6 text-center">
      <svg aria-hidden="true" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 002-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
      </svg>
      <p th:text="#{notes.no_notes_available}">No hay notas disponibles</p>
      <p th:text="#{notes.be_first_to_share}">¡Sé el primero en compartir contenido!</p>
    </div>
  </div>
</section>
