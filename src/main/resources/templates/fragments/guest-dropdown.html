<th:block xmlns:th="http://www.thymeleaf.org">

<!-- GUEST MENU SIMPLE -->
<div th:fragment="guest-dropdown">
    <div class="relative">
        <button id="menu-toggle-btn" 
                class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors">
            Menú
        </button>
        
        <div id="guest-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border z-50">
            <a href="/posts/category/reciclables" class="block px-4 py-2 text-gray-700 hover:bg-green-50">Reciclables</a>
            <a href="/posts/category/no-reciclables" class="block px-4 py-2 text-gray-700 hover:bg-orange-50">No Reciclables</a>
            <a href="/posts/category/informaciones" class="block px-4 py-2 text-gray-700 hover:bg-blue-50">Informaciones</a>
            <div class="border-t border-gray-100"></div>
            <a href="/auth/login" class="block px-4 py-2 text-gray-700 hover:bg-gray-50">Ingresar</a>
        </div>
    </div>
</div>

<script th:fragment="guest-dropdown-js">
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM cargado, configurando guest dropdown');
        
        const toggleBtn = document.getElementById('menu-toggle-btn');
        const menu = document.getElementById('guest-menu');
        
        console.log('Botón toggle:', toggleBtn);
        console.log('Menu elemento:', menu);
        
        if (toggleBtn && menu) {
            // Event listener para el botón
            toggleBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('Click en botón menú');
                const isHidden = menu.classList.contains('hidden');
                console.log('Menu está hidden:', isHidden);
                
                menu.classList.toggle('hidden');
                
                const newState = menu.classList.contains('hidden');
                console.log('Nuevo estado hidden:', newState);
            });
            
            // Event listener para cerrar al hacer click fuera
            document.addEventListener('click', function(e) {
                if (!toggleBtn.contains(e.target) && !menu.contains(e.target)) {
                    if (!menu.classList.contains('hidden')) {
                        console.log('Cerrando menu por click fuera');
                        menu.classList.add('hidden');
                    }
                }
            });
            
            console.log('Event listeners configurados correctamente');
        } else {
            console.error('No se encontraron los elementos necesarios');
            console.error('toggleBtn:', toggleBtn);
            console.error('menu:', menu);
        }
    });
</script>

</th:block>
