<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" layout:decorate="~{layouts/base}">
<head>
  <title layout:fragment="title">Enviar Feedback - Residuos Sólidos</title>
  <meta name="robots" content="noindex, nofollow">
  <th:block layout:fragment="head-extra"></th:block>
</head>
<body>
  <section layout:fragment="content">
    <!-- Navbar guest -->
    <div th:replace="~{fragments/navbar-guest :: navbar}"></div>

    <!-- Breadcrumbs -->
    <div class="bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
        <nav aria-label="Breadcrumb">
          <ol class="flex items-center text-sm text-slate-600">
            <li><a href="/" class="hover:text-slate-900">Inicio</a></li>
            <li class="px-2 text-slate-400">/</li>
            <li class="text-slate-900 font-medium" aria-current="page">Feedback</li>
          </ol>
        </nav>
      </div>
    </div>

    <!-- Contenido principal -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-10">
      <div class="max-w-2xl mx-auto">
        <!-- Header -->
        <div class="bg-white shadow rounded-lg p-6 mb-6">
          <h1 class="text-3xl font-bold text-gray-900 mb-2">Enviar Feedback</h1>
          <p class="text-gray-600">Tu opinión es importante para nosotros. Comparte tus comentarios y sugerencias.</p>
        </div>

        <!-- Messages -->
        <div th:if="${successMessage}" class="bg-green-50 border-l-4 border-green-400 p-4 mb-6">
          <div class="flex">
            <div class="flex-shrink-0">
              <svg class="h-5 w-5 text-green-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-green-700" th:text="${successMessage}">Success message</p>
            </div>
          </div>
        </div>

        <div th:if="${errorMessage}" class="bg-red-50 border-l-4 border-red-400 p-4 mb-6">
          <div class="flex">
            <div class="flex-shrink-0">
              <svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-red-700" th:text="${errorMessage}">Error message</p>
            </div>
          </div>
        </div>

        <!-- Form -->
        <div class="bg-white shadow rounded-lg p-6">
          <form th:action="@{/feedback}" th:object="${feedback}" method="post">
            <div class="space-y-6">
              <div class="bg-gray-50 p-4 rounded-md">
                <p class="text-sm text-gray-600">Enviando feedback como: <span class="font-medium" sec:authentication="name">Usuario</span></p>
              </div>

              <div>
                <label for="comment" class="block text-sm font-medium text-gray-700 mb-2">
                  Comentario <span class="text-red-500">*</span>
                </label>
                <textarea th:field="*{comment}"
                          id="comment"
                          rows="6"
                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                          placeholder="Comparte tu feedback, sugerencias o comentarios..."
                          required></textarea>
              </div>

              <div class="flex items-center justify-between">
                <a href="/" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded font-medium">
                  Volver al inicio
                </a>
                <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-medium">
                  Enviar Feedback
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <th:block th:replace="~{fragments/guest/footer :: guestFooter}"></th:block>
  </section>

  <th:block layout:fragment="body-scripts">
    <script th:replace="~{fragments/navbar-guest :: navbar-script}"></script>
  </th:block>
</body>
</html>
