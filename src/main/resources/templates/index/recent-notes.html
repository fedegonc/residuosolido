<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<section th:fragment="recent-notes" class="mb-12">
    <div class="bg-white rounded-2xl border border-emerald-100/60 shadow-sm p-6 md:p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2">
        <i class="fa-solid fa-file-lines text-green-600 text-xl" aria-hidden="true"></i>
        <span th:text="#{notes.title}">Notas Recentes</span>
      </h2>
      <p class="text-sm text-gray-500 mb-6" th:text="#{index.notes.description}">Descubre artículos informativos sobre reciclaje, medio ambiente y gestión sostenible de residuos.</p>

      <div th:if="${recentNotes != null and !recentNotes.empty}" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
      <!-- Notas reales (máximo 9) -->
      <a th:each="note, iterStat : ${recentNotes}" th:if="${iterStat.index < 9}" th:href="${note.url}"
         class="block bg-white rounded-lg p-4 md:p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow focus:outline-none focus:ring-2 focus:ring-emerald-300 focus:ring-offset-2 focus:ring-offset-white">
        <div class="flex flex-col h-full">
          <!-- Placeholder para notas sin imagen -->
          <div class="w-full aspect-[4/3] bg-gray-100 rounded-lg flex items-center justify-center" th:if="${note.image == '/images/placeholder.jpg' or #strings.isEmpty(note.image)}">
            <span class="text-2xl font-bold text-gray-600" th:text="${#strings.substring(note.title, 0, 1).toUpperCase()}"></span>
          </div>
          <!-- Imagen real con aspect ratio -->
          <div class="w-full aspect-[4/3] rounded-lg overflow-hidden bg-gray-100" th:unless="${note.image == '/images/placeholder.jpg' or #strings.isEmpty(note.image)}">
            <img th:src="${note.image}" alt="Imagen de la nota" class="w-full h-full object-cover">
          </div>

          <div class="mt-3 flex-1 flex flex-col">
            <h4 th:text="${note.title}" class="font-semibold text-gray-900 text-sm mb-1 line-clamp-2">Título de la nota</h4>
            <p th:text="${note.excerpt}" class="text-xs text-gray-600 mb-2 line-clamp-2">Extracto de la nota...</p>
            <span class="text-blue-600 font-medium text-xs flex items-center gap-1 mt-auto">
              <i class="fa-solid fa-arrow-up-right-from-square text-[0.65rem]" aria-hidden="true"></i>
              <span th:text="#{button.view}">Ver</span>
            </span>
          </div>
        </div>
      </a>

      <!-- Tarjeta "Ver más" -->
      <a th:href="@{/posts}"
         class="block bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border-2 border-dashed border-blue-200 hover:border-blue-300 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-2 focus:ring-offset-white">
        <div class="flex flex-col items-center justify-center h-full text-center">
          <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-3">
            <i class="fa-solid fa-plus text-blue-600 text-xl" aria-hidden="true"></i>
          </div>
          <h4 class="font-semibold text-blue-800 text-sm mb-1" th:text="#{button.more}">Ver mais</h4>
          <p class="text-xs text-blue-600 mb-3" th:text="#{notes.published_recently}">Publicado recentemente</p>
          <span class="text-blue-700 hover:text-blue-800 font-medium text-xs" th:text="#{index.notes.view_articles}">Ir para artigos →</span>
        </div>
      </a>

      
      </div>

      <div th:if="${recentNotes == null or recentNotes.empty}" class="text-center py-8 text-gray-500">
        <i class="fa-solid fa-file-lines text-2xl text-gray-300" aria-hidden="true"></i>
        <p class="text-sm" th:text="#{notes.no_notes_available}">Não há notas disponíveis</p>
      </div>
    </div>
  </section>
</body>
</html>
