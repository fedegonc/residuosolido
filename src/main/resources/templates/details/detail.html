<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('Detalle de Material')}"></head>
<body>
    <div th:replace="~{fragments/layout :: layout(~{::div.content})}">
        <div class="content">
            <div class="container mx-auto px-4 py-8">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-800">Detalle de Material</h1>
                    <div>
                        <a th:href="@{/materials}" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 mr-2">
                            Volver
                        </a>
                        <a th:href="@{/materials/{id}/edit(id=${material.id})}" class="bg-secondary text-white px-4 py-2 rounded hover:bg-secondary-dark">
                            Editar
                        </a>
                    </div>
                </div>

                <div th:if="${message}" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4" role="alert">
                    <span th:text="${message}"></span>
                </div>

                <div class="bg-white shadow overflow-hidden sm:rounded-lg">
                    <div class="px-4 py-5 sm:px-6">
                        <h3 class="text-lg leading-6 font-medium text-gray-900">
                            Información del Material
                        </h3>
                        <p class="mt-1 max-w-2xl text-sm text-gray-500">
                            Detalles y propiedades
                        </p>
                    </div>
                    <div class="border-t border-gray-200">
                        <dl>
                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm font-medium text-gray-500">ID</dt>
                                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2" th:text="${material.id}"></dd>
                            </div>
                            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm font-medium text-gray-500">Nombre</dt>
                                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2" th:text="${material.name}"></dd>
                            </div>
                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm font-medium text-gray-500">Descripción</dt>
                                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2" th:text="${material.description}"></dd>
                            </div>
                            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm font-medium text-gray-500">Categoría</dt>
                                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2" th:text="${material.category}"></dd>
                            </div>
                            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm font-medium text-gray-500">Estado</dt>
                                <dd class="mt-1 text-sm sm:mt-0 sm:col-span-2">
                                    <span th:if="${material.active}" class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                        Activo
                                    </span>
                                    <span th:unless="${material.active}" class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                        Inactivo
                                    </span>
                                </dd>
                            </div>
                            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm font-medium text-gray-500">Organizaciones</dt>
                                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                                    <ul th:if="${not #lists.isEmpty(material.organizations)}" class="border border-gray-200 rounded-md divide-y divide-gray-200">
                                        <li th:each="org : ${material.organizations}" class="pl-3 pr-4 py-3 flex items-center justify-between text-sm">
                                            <div class="w-0 flex-1 flex items-center">
                                                <span class="ml-2 flex-1 w-0 truncate" th:text="${org.name}"></span>
                                            </div>
                                            <div class="ml-4 flex-shrink-0">
                                                <a th:href="@{/organizations/{id}(id=${org.id})}" class="font-medium text-primary hover:text-primary-dark">
                                                    Ver
                                                </a>
                                            </div>
                                        </li>
                                    </ul>
                                    <p th:if="${#lists.isEmpty(material.organizations)}" class="text-sm text-gray-500">
                                        No hay organizaciones asociadas a este material
                                    </p>
                                </dd>
                            </div>
                        </dl>
                    </div>
                </div>

                <div class="mt-6 flex justify-between">
                    <a th:href="@{/materials}" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                        Volver a la lista
                    </a>
                    <form th:action="@{/materials/{id}/delete(id=${material.id})}" method="post" class="inline">
                        <button type="submit" class="bg-danger text-white px-4 py-2 rounded hover:bg-danger-dark" 
                                onclick="return confirm('¿Estás seguro de eliminar este material?')">
                            Eliminar
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
