# Diagrama de Casos de Uso - Sistema EcoSolicitud

## Actores del Sistema

### 1. **Usuario (USER)**
- Ciudadano registrado que solicita recolecci√≥n de residuos
- Puede crear, ver y gestionar sus propias solicitudes

### 2. **Organizaci√≥n (ORGANIZATION)**
- Entidad encargada de recolectar residuos
- Gestiona solicitudes asignadas y calendario de recolecci√≥n

### 3. **Administrador (ADMIN)**
- Gestor del sistema completo
- Control total sobre usuarios, organizaciones, contenido y configuraci√≥n

### 4. **Invitado (GUEST)**
- Usuario no autenticado
- Acceso limitado a contenido p√∫blico

---

## Casos de Uso por Actor

### üë§ USUARIO (USER)

#### **CU-U01: Gestionar Solicitudes de Recolecci√≥n** ‚≠ê (Detallado)
- **Descripci√≥n:** Crear, ver, editar y cancelar solicitudes de recolecci√≥n
- **Incluye:**
  - CU-U01.1: Crear Nueva Solicitud
  - CU-U01.2: Ver Mis Solicitudes
  - CU-U01.3: Ver Detalle de Solicitud
  - CU-U01.4: Cancelar Solicitud (solo si estado = PENDIENTE)

##### **CU-U01.1: Crear Nueva Solicitud** (Flujo Detallado)
1. Usuario accede a "Nueva Solicitud"
2. Sistema muestra formulario con:
   - Selecci√≥n de materiales (m√∫ltiple)
   - Direcci√≥n de recolecci√≥n
   - Fecha preferida
   - Notas adicionales
   - Carga de im√°genes (opcional)
3. Usuario completa formulario
4. Sistema valida datos
5. Sistema crea solicitud con estado PENDIENTE
6. Sistema notifica al usuario
7. Sistema asigna solicitud a organizaciones disponibles

**Flujo Alternativo:**
- 4a. Datos inv√°lidos ‚Üí Sistema muestra errores
- 7a. No hay organizaciones ‚Üí Solicitud queda en cola

##### **CU-U01.2: Ver Mis Solicitudes**
1. Usuario accede a "Mis Solicitudes"
2. Sistema muestra lista de solicitudes con:
   - Estado (PENDIENTE, ACEPTADA, EN_PROCESO, COMPLETADA, CANCELADA)
   - Fecha de creaci√≥n
   - Materiales
   - Organizaci√≥n asignada (si existe)
3. Usuario puede filtrar por estado
4. Usuario puede ver detalles (‚Üí CU-U01.3)

#### **CU-U02: Gestionar Perfil**
- **Incluye:**
  - CU-U02.1: Ver Perfil
  - CU-U02.2: Editar Informaci√≥n Personal
  - CU-U02.3: Cambiar Contrase√±a

#### **CU-U03: Ver Informaci√≥n Educativa**
- Acceder a posts sobre reciclaje
- Ver categor√≠as de residuos
- Consultar gu√≠as

#### **CU-U04: Enviar Feedback**
- Reportar problemas
- Sugerencias
- Quejas

#### **CU-U05: Usar Chat de Ayuda**
- Consultar FAQs
- Asistente virtual

---

### üè¢ ORGANIZACI√ìN (ORGANIZATION)

#### **CU-O01: Gestionar Solicitudes Asignadas** ‚≠ê (Detallado)
- **Descripci√≥n:** Ver, aceptar y gestionar solicitudes de recolecci√≥n
- **Incluye:**
  - CU-O01.1: Ver Solicitudes Disponibles
  - CU-O01.2: Aceptar Solicitud
  - CU-O01.3: Cambiar Estado de Solicitud
  - CU-O01.4: Completar Recolecci√≥n

##### **CU-O01.1: Ver Solicitudes Disponibles**
1. Organizaci√≥n accede a "Solicitudes"
2. Sistema muestra solicitudes filtradas por:
   - Estado (PENDIENTE, ACEPTADA, EN_PROCESO)
   - Zona geogr√°fica
   - Tipo de material
3. Organizaci√≥n puede ver detalles completos

##### **CU-O01.2: Aceptar Solicitud** (Flujo Detallado)
1. Organizaci√≥n selecciona solicitud PENDIENTE
2. Sistema muestra detalles completos:
   - Direcci√≥n exacta
   - Materiales
   - Im√°genes
   - Fecha preferida
3. Organizaci√≥n confirma aceptaci√≥n
4. Sistema cambia estado a ACEPTADA
5. Sistema notifica al usuario
6. Sistema registra organizaci√≥n asignada

**Flujo Alternativo:**
- 3a. Organizaci√≥n rechaza ‚Üí Solicitud vuelve a disponibles

##### **CU-O01.3: Cambiar Estado de Solicitud**
- ACEPTADA ‚Üí EN_PROCESO (al iniciar recolecci√≥n)
- EN_PROCESO ‚Üí COMPLETADA (al finalizar)

##### **CU-O01.4: Completar Recolecci√≥n**
1. Organizaci√≥n marca solicitud como COMPLETADA
2. Sistema solicita confirmaci√≥n
3. Sistema registra fecha de completado
4. Sistema notifica al usuario
5. Sistema actualiza estad√≠sticas

#### **CU-O02: Gestionar Calendario de Recolecci√≥n**
- Ver solicitudes programadas
- Planificar rutas
- Gestionar disponibilidad

#### **CU-O03: Ver Dashboard Organizacional**
- Estad√≠sticas de recolecci√≥n
- Solicitudes activas
- Historial

#### **CU-O04: Gestionar Perfil de Organizaci√≥n**
- Editar informaci√≥n
- Actualizar zonas de cobertura
- Gestionar contacto

---

### üë®‚Äçüíº ADMINISTRADOR (ADMIN)

#### **CU-A01: Gestionar Usuarios**
- Crear, editar, eliminar usuarios
- Activar/desactivar cuentas
- Asignar roles
- Ver actividad

#### **CU-A02: Gestionar Organizaciones**
- Aprobar/rechazar organizaciones
- Editar informaci√≥n
- Activar/desactivar
- Asignar zonas

#### **CU-A03: Gestionar Solicitudes (Global)**
- Ver todas las solicitudes
- Reasignar solicitudes
- Resolver conflictos
- Estad√≠sticas globales

#### **CU-A04: Gestionar Contenido**
- **Incluye:**
  - CU-A04.1: Gestionar Posts
  - CU-A04.2: Gestionar Categor√≠as
  - CU-A04.3: Gestionar Materiales

#### **CU-A05: Gestionar Feedback**
- Ver feedback de usuarios
- Responder
- Marcar como resuelto
- Estad√≠sticas

#### **CU-A06: Configurar Sistema**
- Par√°metros generales
- Imagen hero
- Textos del sistema
- Configuraci√≥n de notificaciones

#### **CU-A07: Ver Dashboard Administrativo**
- Estad√≠sticas completas
- Gr√°ficos
- Reportes
- Actividad del sistema

---

### üåê INVITADO (GUEST)

#### **CU-G01: Ver Contenido P√∫blico**
- Ver posts educativos
- Ver categor√≠as
- Ver organizaciones registradas

#### **CU-G02: Registrarse**
- Crear cuenta de usuario
- Validar email
- Completar perfil

#### **CU-G03: Ver Informaci√≥n del Sistema**
- P√°gina principal
- Sobre nosotros
- Contacto

---

## Casos de Uso Compartidos (Todos los Actores Autenticados)

### **CU-S01: Autenticaci√≥n** ‚≠ê (Detallado)

#### **CU-S01.1: Login** (Flujo Detallado)
1. Usuario accede a p√°gina de login
2. Sistema muestra formulario (username/email + password)
3. Usuario ingresa credenciales
4. Sistema valida credenciales
5. Sistema verifica estado de cuenta (activa)
6. Sistema crea sesi√≥n
7. Sistema redirige seg√∫n rol:
   - USER ‚Üí `/user/dashboard`
   - ORGANIZATION ‚Üí `/organization/dashboard`
   - ADMIN ‚Üí `/admin`

**Flujos Alternativos:**
- 4a. Credenciales inv√°lidas ‚Üí Mensaje de error
- 5a. Cuenta inactiva ‚Üí Mensaje "Cuenta desactivada"
- 4b. Usuario bloqueado (3 intentos) ‚Üí Bloqueo temporal

**Extensiones:**
- <<include>> CU-S01.3: Recordar Contrase√±a

#### **CU-S01.2: Logout** (Flujo Detallado)
1. Usuario autenticado hace clic en "Cerrar sesi√≥n"
2. Sistema solicita confirmaci√≥n (opcional)
3. Usuario confirma
4. Sistema invalida sesi√≥n
5. Sistema limpia cookies/tokens
6. Sistema redirige a p√°gina principal

**Flujo Alternativo:**
- 2a. Usuario cancela ‚Üí Permanece en sesi√≥n

#### **CU-S01.3: Recuperar Contrase√±a**
1. Usuario hace clic en "Olvid√© mi contrase√±a"
2. Sistema solicita email
3. Usuario ingresa email
4. Sistema valida email existe
5. Sistema genera token temporal
6. Sistema env√≠a email con link
7. Usuario hace clic en link
8. Sistema valida token (vigencia 24h)
9. Sistema muestra formulario nueva contrase√±a
10. Usuario ingresa nueva contrase√±a
11. Sistema valida requisitos
12. Sistema actualiza contrase√±a
13. Sistema invalida token
14. Sistema notifica cambio exitoso

**Flujos Alternativos:**
- 4a. Email no existe ‚Üí Mensaje gen√©rico (seguridad)
- 8a. Token expirado ‚Üí Solicitar nuevo
- 11a. Contrase√±a d√©bil ‚Üí Mostrar requisitos

### **CU-S02: Cambiar Idioma**
- Seleccionar Espa√±ol/Portugu√©s
- Sistema actualiza interfaz
- Guarda preferencia

---

## Relaciones entre Casos de Uso

### **<<include>>** (Obligatorio)

1. **CU-U01.1: Crear Nueva Solicitud**
   - <<include>> CU-S03: Validar Sesi√≥n Activa
   - <<include>> CU-S04: Subir Im√°genes (Cloudinary)

2. **CU-O01.2: Aceptar Solicitud**
   - <<include>> CU-S03: Validar Sesi√≥n Activa
   - <<include>> CU-S05: Enviar Notificaci√≥n

3. **CU-S01.1: Login**
   - <<include>> CU-S06: Validar CSRF Token

4. **Todos los CU de modificaci√≥n**
   - <<include>> CU-S03: Validar Sesi√≥n Activa
   - <<include>> CU-S06: Validar CSRF Token

### **<<extend>>** (Opcional)

1. **CU-U01.1: Crear Nueva Solicitud**
   - <<extend>> CU-U01.5: Programar Fecha Espec√≠fica
   - <<extend>> CU-U01.6: Agregar Notas Especiales

2. **CU-O01.2: Aceptar Solicitud**
   - <<extend>> CU-O01.5: Sugerir Fecha Alternativa
   - <<extend>> CU-O01.6: Solicitar Informaci√≥n Adicional

3. **CU-S01.1: Login**
   - <<extend>> CU-S01.4: Login con Google (futuro)
   - <<extend>> CU-S01.5: Autenticaci√≥n 2FA (futuro)

### **Generalizaci√≥n**

1. **CU-Base: Gestionar Entidad**
   - CU-A01: Gestionar Usuarios
   - CU-A02: Gestionar Organizaciones
   - CU-A04.1: Gestionar Posts
   - CU-A04.2: Gestionar Categor√≠as
   - CU-A04.3: Gestionar Materiales

---

## Casos de Uso del Sistema (Internos)

### **CU-S03: Validar Sesi√≥n Activa**
- Verificar token de sesi√≥n
- Validar expiraci√≥n
- Verificar permisos de rol

### **CU-S04: Subir Im√°genes**
- Validar formato (jpg, png, webp)
- Validar tama√±o (max 5MB)
- Subir a Cloudinary
- Retornar URL

### **CU-S05: Enviar Notificaci√≥n**
- Crear notificaci√≥n en BD
- Enviar email (opcional)
- Registrar en log

### **CU-S06: Validar CSRF Token**
- Verificar token en request
- Validar contra sesi√≥n
- Prevenir ataques CSRF

---

## Flujo Principal del Sistema (Ciclo Completo)

### **Flujo: Solicitud de Recolecci√≥n Completa** ‚≠ê

```
1. [USER] Crea solicitud (CU-U01.1)
   ‚Üì
2. [SISTEMA] Valida y guarda con estado PENDIENTE
   ‚Üì
3. [SISTEMA] Notifica a organizaciones disponibles
   ‚Üì
4. [ORGANIZATION] Ve solicitud disponible (CU-O01.1)
   ‚Üì
5. [ORGANIZATION] Acepta solicitud (CU-O01.2)
   ‚Üì
6. [SISTEMA] Cambia estado a ACEPTADA
   ‚Üì
7. [SISTEMA] Notifica a USER
   ‚Üì
8. [ORGANIZATION] Inicia recolecci√≥n ‚Üí estado EN_PROCESO (CU-O01.3)
   ‚Üì
9. [ORGANIZATION] Completa recolecci√≥n ‚Üí estado COMPLETADA (CU-O01.4)
   ‚Üì
10. [SISTEMA] Notifica a USER
    ‚Üì
11. [USER] Ve solicitud completada (CU-U01.2)
    ‚Üì
12. [USER] (Opcional) Env√≠a feedback (CU-U04)
```

**Flujos Alternativos:**
- Paso 5a: Ninguna organizaci√≥n acepta ‚Üí ADMIN reasigna (CU-A03)
- Paso 8a: USER cancela ‚Üí estado CANCELADA (CU-U01.4)
- Paso 9a: Problema en recolecci√≥n ‚Üí ORGANIZATION contacta USER

---

## Reglas de Negocio

### **RN-01: Estados de Solicitud**
- PENDIENTE ‚Üí Solo puede ir a ACEPTADA o CANCELADA
- ACEPTADA ‚Üí Solo puede ir a EN_PROCESO o CANCELADA
- EN_PROCESO ‚Üí Solo puede ir a COMPLETADA
- COMPLETADA/CANCELADA ‚Üí Estados finales (no cambian)

### **RN-02: Permisos de Cancelaci√≥n**
- USER puede cancelar solo si estado = PENDIENTE o ACEPTADA
- ORGANIZATION puede rechazar solo si estado = PENDIENTE
- ADMIN puede cancelar en cualquier estado

### **RN-03: Asignaci√≥n de Solicitudes**
- Una solicitud solo puede tener una organizaci√≥n asignada
- Organizaci√≥n debe estar activa
- Organizaci√≥n debe cubrir la zona geogr√°fica

### **RN-04: Roles y Permisos**
- USER: Solo ve y gestiona sus propias solicitudes
- ORGANIZATION: Ve solicitudes de su zona o asignadas
- ADMIN: Ve y gestiona todas las solicitudes

### **RN-05: Validaciones de Solicitud**
- M√≠nimo 1 material seleccionado
- Direcci√≥n obligatoria
- Fecha preferida debe ser futura
- M√°ximo 5 im√°genes por solicitud

---

## Prioridades de Implementaci√≥n

### **Fase 1 - Core (Implementado)**
- ‚úÖ CU-S01: Autenticaci√≥n (Login/Logout)
- ‚úÖ CU-G02: Registro
- ‚úÖ CU-U01: Gestionar Solicitudes
- ‚úÖ CU-O01: Gestionar Solicitudes Asignadas
- ‚úÖ CU-A01: Gestionar Usuarios
- ‚úÖ CU-A04: Gestionar Contenido

### **Fase 2 - Mejoras (En Progreso)**
- üîÑ CU-U04: Feedback
- üîÑ CU-U05: Chat de Ayuda
- üîÑ CU-O02: Calendario
- üîÑ CU-S05: Notificaciones

### **Fase 3 - Futuro**
- ‚è≥ CU-S01.4: Login Social
- ‚è≥ CU-S01.5: 2FA
- ‚è≥ CU-A07: Dashboard Avanzado
- ‚è≥ Reportes y Analytics

---

## Notas T√©cnicas

### **Seguridad**
- Todos los CU autenticados requieren validaci√≥n de sesi√≥n
- CSRF protection en formularios
- Validaci√≥n de permisos por rol
- Sanitizaci√≥n de inputs

### **Tecnolog√≠as**
- Spring Security para autenticaci√≥n
- Thymeleaf para vistas
- Cloudinary para im√°genes
- PostgreSQL para persistencia
- Gemini AI para chat de ayuda

### **Integraciones**
- Cloudinary API (subida de im√°genes)
- Email service (notificaciones)
- Gemini API (asistente virtual)

---

# Diagrama Entidad-Relaci√≥n (ER) - Modelo Conceptual

## Entidades Principales

### **1. Usuario (User)**
**Descripci√≥n:** Representa a cualquier persona registrada en el sistema

**Atributos:**
- id (PK)
- username (√∫nico)
- email (√∫nico)
- password (hash)
- firstName
- lastName
- phone
- address
- role (ADMIN, USER, ORGANIZATION)
- active (boolean)
- createdAt
- updatedAt

**Relaciones:**
- 1:N con Solicitud (un usuario puede crear muchas solicitudes)
- 1:N con Feedback (un usuario puede enviar m√∫ltiples feedbacks)
- 1:1 con Organizaci√≥n (si role = ORGANIZATION)

---

### **2. Organizaci√≥n (Organization)**
**Descripci√≥n:** Entidad que realiza recolecci√≥n de residuos

**Atributos:**
- id (PK)
- userId (FK ‚Üí User) (√∫nico)
- name
- description
- contactEmail
- contactPhone
- address
- coverageArea (zona geogr√°fica)
- active (boolean)
- createdAt
- updatedAt

**Relaciones:**
- 1:1 con Usuario (una organizaci√≥n est√° vinculada a un usuario)
- 1:N con Solicitud (una organizaci√≥n puede aceptar muchas solicitudes)

---

### **3. Solicitud (Request)**
**Descripci√≥n:** Pedido de recolecci√≥n de residuos

**Atributos:**
- id (PK)
- userId (FK ‚Üí User)
- organizationId (FK ‚Üí Organization, nullable)
- address
- preferredDate
- notes
- status (PENDIENTE, ACEPTADA, EN_PROCESO, COMPLETADA, CANCELADA)
- createdAt
- updatedAt
- acceptedAt
- completedAt
- cancelledAt

**Relaciones:**
- N:1 con Usuario (muchas solicitudes pertenecen a un usuario)
- N:1 con Organizaci√≥n (muchas solicitudes pueden ser asignadas a una organizaci√≥n)
- N:M con Material (una solicitud puede tener m√∫ltiples materiales)
- 1:N con Imagen (una solicitud puede tener m√∫ltiples im√°genes)

---

### **4. Material**
**Descripci√≥n:** Tipo de residuo reciclable

**Atributos:**
- id (PK)
- name
- description
- category (RECICLABLE, NO_RECICLABLE, PELIGROSO, ORG√ÅNICO)
- imageUrl
- active (boolean)
- createdAt
- updatedAt

**Relaciones:**
- N:M con Solicitud (un material puede estar en muchas solicitudes)

---

### **5. SolicitudMaterial (Request_Material)** [Tabla Intermedia]
**Descripci√≥n:** Relaci√≥n muchos a muchos entre Solicitud y Material

**Atributos:**
- requestId (FK ‚Üí Request, PK)
- materialId (FK ‚Üí Material, PK)
- quantity (opcional)
- estimatedWeight (opcional)

**Relaciones:**
- N:1 con Solicitud
- N:1 con Material

---

### **6. Imagen (Image)**
**Descripci√≥n:** Fotograf√≠as de los residuos

**Atributos:**
- id (PK)
- requestId (FK ‚Üí Request)
- url (Cloudinary URL)
- publicId (Cloudinary ID)
- uploadedAt

**Relaciones:**
- N:1 con Solicitud (muchas im√°genes pertenecen a una solicitud)

---

### **7. Post**
**Descripci√≥n:** Contenido educativo sobre reciclaje

**Atributos:**
- id (PK)
- categoryId (FK ‚Üí Category)
- title
- content
- imageUrl
- sourceUrl
- sourceName
- active (boolean)
- createdAt
- updatedAt

**Relaciones:**
- N:1 con Categor√≠a (muchos posts pertenecen a una categor√≠a)

---

### **8. Categor√≠a (Category)**
**Descripci√≥n:** Clasificaci√≥n de posts educativos

**Atributos:**
- id (PK)
- name
- description
- iconClass
- displayOrder
- active (boolean)
- createdAt
- updatedAt

**Relaciones:**
- 1:N con Post (una categor√≠a puede tener muchos posts)

---

### **9. Feedback**
**Descripci√≥n:** Comentarios y sugerencias de usuarios

**Atributos:**
- id (PK)
- userId (FK ‚Üí User)
- name
- email
- comment
- adminResponse (nullable)
- isRead (boolean)
- createdAt
- respondedAt

**Relaciones:**
- N:1 con Usuario (muchos feedbacks pertenecen a un usuario)

---

### **10. Notificaci√≥n (Notification)** [Conceptual - No implementada]
**Descripci√≥n:** Alertas y avisos para usuarios

**Atributos:**
- id (PK)
- userId (FK ‚Üí User)
- type (SOLICITUD_ACEPTADA, SOLICITUD_COMPLETADA, etc.)
- title
- message
- isRead (boolean)
- createdAt

**Relaciones:**
- N:1 con Usuario

---

### **11. Configuraci√≥nSistema (SystemConfig)** [Conceptual]
**Descripci√≥n:** Par√°metros globales del sistema

**Atributos:**
- id (PK)
- key (√∫nico)
- value
- description
- updatedAt

---

## Diagrama ER en Texto

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Usuario   ‚îÇ
‚îÇ  (User)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)     ‚îÇ
‚îÇ username    ‚îÇ
‚îÇ email       ‚îÇ
‚îÇ password    ‚îÇ
‚îÇ role        ‚îÇ
‚îÇ active      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ 1:1 (si role=ORG)
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ                          ‚îÇ
       ‚îÇ 1:N (crea)               ‚îÇ 1:N (env√≠a)
       ‚Üì                          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Organizaci√≥n ‚îÇ           ‚îÇ   Feedback   ‚îÇ
‚îÇ(Organization)‚îÇ           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§           ‚îÇ id (PK)      ‚îÇ
‚îÇ id (PK)      ‚îÇ           ‚îÇ userId (FK)  ‚îÇ
‚îÇ userId (FK)  ‚îÇ           ‚îÇ comment      ‚îÇ
‚îÇ name         ‚îÇ           ‚îÇ isRead       ‚îÇ
‚îÇ coverageArea ‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ 1:N (acepta)
       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Solicitud   ‚îÇ
‚îÇ  (Request)   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)      ‚îÇ
‚îÇ userId (FK)  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ N:1 (pertenece)
‚îÇ orgId (FK)   ‚îÇ
‚îÇ status       ‚îÇ
‚îÇ address      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ 1:N
       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Imagen    ‚îÇ
‚îÇ   (Image)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)      ‚îÇ
‚îÇ requestId(FK)‚îÇ
‚îÇ url          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Solicitud   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄN:M‚îÄ‚îÄ‚î§SolicitudMaterial‚îú‚îÄ‚îÄ‚îÄN:M‚îÄ‚îÄ‚ñ∫‚îÇ   Material   ‚îÇ
‚îÇ  (Request)   ‚îÇ         ‚îÇ(Request_Material)‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îÇ id (PK)      ‚îÇ
                         ‚îÇ requestId (FK) ‚îÇ         ‚îÇ name         ‚îÇ
                         ‚îÇ materialId(FK) ‚îÇ         ‚îÇ category     ‚îÇ
                         ‚îÇ quantity       ‚îÇ         ‚îÇ active       ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Categor√≠a   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ1:N‚îÄ‚îÄ‚î§     Post     ‚îÇ
‚îÇ  (Category)  ‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îÇ id (PK)      ‚îÇ
‚îÇ id (PK)      ‚îÇ         ‚îÇ categoryId(FK)‚îÇ
‚îÇ name         ‚îÇ         ‚îÇ title        ‚îÇ
‚îÇ displayOrder ‚îÇ         ‚îÇ content      ‚îÇ
‚îÇ active       ‚îÇ         ‚îÇ active       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Cardinalidades y Restricciones

### **Relaciones 1:1**
- Usuario ‚Üî Organizaci√≥n (un usuario puede ser una organizaci√≥n)
  - Restricci√≥n: Solo si `User.role = ORGANIZATION`

### **Relaciones 1:N**
- Usuario ‚Üí Solicitud (un usuario crea muchas solicitudes)
- Usuario ‚Üí Feedback (un usuario env√≠a m√∫ltiples feedbacks)
- Organizaci√≥n ‚Üí Solicitud (una organizaci√≥n acepta muchas solicitudes)
- Solicitud ‚Üí Imagen (una solicitud tiene m√∫ltiples im√°genes)
- Categor√≠a ‚Üí Post (una categor√≠a agrupa m√∫ltiples posts)

### **Relaciones N:M**
- Solicitud ‚Üî Material (a trav√©s de SolicitudMaterial)
  - Una solicitud puede tener m√∫ltiples materiales
  - Un material puede estar en m√∫ltiples solicitudes

### **Restricciones de Integridad**
1. `Request.organizationId` puede ser NULL (solicitud pendiente)
2. `Request.status` solo puede tener valores del enum definido
3. `User.username` y `User.email` deben ser √∫nicos
4. `Organization.userId` debe ser √∫nico (1:1)
5. Eliminaci√≥n en cascada:
   - Usuario eliminado ‚Üí Solicitudes marcadas como hu√©rfanas (no eliminar)
   - Solicitud eliminada ‚Üí Im√°genes eliminadas
   - Categor√≠a eliminada ‚Üí Posts quedan sin categor√≠a (nullable)

---

# Diagrama de Clases - Alto Nivel

## Paquetes Principales

### **1. com.residuosolido.app.model** (Entidades de Dominio)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            <<abstract>>                 ‚îÇ
‚îÇ           BaseEntity                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - id: Long                              ‚îÇ
‚îÇ - createdAt: LocalDateTime              ‚îÇ
‚îÇ - updatedAt: LocalDateTime              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + getId(): Long                         ‚îÇ
‚îÇ + getCreatedAt(): LocalDateTime         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚ñ≥
                    ‚îÇ (herencia)
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ           ‚îÇ           ‚îÇ              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    User      ‚îÇ ‚îÇ  Request  ‚îÇ ‚îÇ Material  ‚îÇ ‚îÇ   Post    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - username   ‚îÇ ‚îÇ - address ‚îÇ ‚îÇ - name    ‚îÇ ‚îÇ - title   ‚îÇ
‚îÇ - email      ‚îÇ ‚îÇ - status  ‚îÇ ‚îÇ - category‚îÇ ‚îÇ - content ‚îÇ
‚îÇ - password   ‚îÇ ‚îÇ - notes   ‚îÇ ‚îÇ - active  ‚îÇ ‚îÇ - active  ‚îÇ
‚îÇ - role       ‚îÇ ‚îÇ - user    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ - active     ‚îÇ ‚îÇ - org     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ - materials‚îÇ
‚îÇ + login()    ‚îÇ ‚îÇ - images  ‚îÇ
‚îÇ + logout()   ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + hasRole()  ‚îÇ ‚îÇ + accept()‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ + complete‚îÇ
                 ‚îÇ + cancel()‚îÇ
                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **2. com.residuosolido.app.repository** (Acceso a Datos)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      <<interface>>                      ‚îÇ
‚îÇ   JpaRepository<T, ID>                  ‚îÇ
‚îÇ      (Spring Data JPA)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚ñ≥
                    ‚îÇ (extends)
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ           ‚îÇ           ‚îÇ              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ UserRepository   ‚îÇ ‚îÇRequestRepo   ‚îÇ ‚îÇMaterialRepo   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + findByEmail()  ‚îÇ ‚îÇ + findByUser ‚îÇ ‚îÇ + findActive()‚îÇ
‚îÇ + findByRole()   ‚îÇ ‚îÇ + findByOrg  ‚îÇ ‚îÇ + findByName()‚îÇ
‚îÇ + existsByEmail()‚îÇ ‚îÇ + findByStatus‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **3. com.residuosolido.app.service** (L√≥gica de Negocio)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         UserService                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - userRepository: UserRepository        ‚îÇ
‚îÇ - passwordEncoder: PasswordEncoder      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + register(userData): User              ‚îÇ
‚îÇ + authenticate(credentials): User       ‚îÇ
‚îÇ + updateProfile(userId, data): User     ‚îÇ
‚îÇ + changePassword(userId, pwd): void     ‚îÇ
‚îÇ + deactivate(userId): void              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       RequestService                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - requestRepository: RequestRepository  ‚îÇ
‚îÇ - userService: UserService              ‚îÇ
‚îÇ - notificationService: NotificationSvc  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + createRequest(data): Request          ‚îÇ
‚îÇ + getUserRequests(userId): List<Req>    ‚îÇ
‚îÇ + acceptRequest(reqId, orgId): Request  ‚îÇ
‚îÇ + updateStatus(reqId, status): Request  ‚îÇ
‚îÇ + cancelRequest(reqId): void            ‚îÇ
‚îÇ + assignOrganization(reqId, orgId): Req ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    OrganizationService                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - orgRepository: OrganizationRepository ‚îÇ
‚îÇ - requestService: RequestService        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + getAvailableRequests(orgId): List<Req>‚îÇ
‚îÇ + acceptRequest(orgId, reqId): Request  ‚îÇ
‚îÇ + getAssignedRequests(orgId): List<Req> ‚îÇ
‚îÇ + updateProfile(orgId, data): Org       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      MaterialService                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - materialRepository: MaterialRepository‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + getAllActive(): List<Material>        ‚îÇ
‚îÇ + create(data): Material                ‚îÇ
‚îÇ + update(id, data): Material            ‚îÇ
‚îÇ + toggleActive(id): Material            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      NotificationService                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - emailService: EmailService            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + notifyRequestAccepted(request): void  ‚îÇ
‚îÇ + notifyRequestCompleted(request): void ‚îÇ
‚îÇ + sendEmail(to, subject, body): void    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **4. com.residuosolido.app.controller** (Capa de Presentaci√≥n)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      AuthController                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - userService: UserService              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + showLogin(): String                   ‚îÇ
‚îÇ + showRegister(): String                ‚îÇ
‚îÇ + register(form): String                ‚îÇ
‚îÇ + logout(): String                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      UserController                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - requestService: RequestService        ‚îÇ
‚îÇ - materialService: MaterialService      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + showDashboard(): String               ‚îÇ
‚îÇ + showNewRequest(): String              ‚îÇ
‚îÇ + createRequest(form): String           ‚îÇ
‚îÇ + showMyRequests(): String              ‚îÇ
‚îÇ + cancelRequest(id): String             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    OrganizationController               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - orgService: OrganizationService       ‚îÇ
‚îÇ - requestService: RequestService        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + showDashboard(): String               ‚îÇ
‚îÇ + showAvailableRequests(): String       ‚îÇ
‚îÇ + acceptRequest(id): String             ‚îÇ
‚îÇ + updateRequestStatus(id, status): Str  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       AdminController                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - userService: UserService              ‚îÇ
‚îÇ - requestService: RequestService        ‚îÇ
‚îÇ - materialService: MaterialService      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + showDashboard(): String               ‚îÇ
‚îÇ + manageUsers(): String                 ‚îÇ
‚îÇ + manageRequests(): String              ‚îÇ
‚îÇ + manageMaterials(): String             ‚îÇ
‚îÇ + manageOrganizations(): String         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **5. com.residuosolido.app.security** (Seguridad)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      SecurityConfig                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - userDetailsService: UserDetailsService‚îÇ
‚îÇ - passwordEncoder: PasswordEncoder      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + securityFilterChain(): SecurityChain  ‚îÇ
‚îÇ + passwordEncoder(): PasswordEncoder    ‚îÇ
‚îÇ + configure(http): void                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CustomUserDetailsService              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - userRepository: UserRepository        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + loadUserByUsername(user): UserDetails ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **6. com.residuosolido.app.util** (Utilidades)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      CloudinaryService                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - cloudinary: Cloudinary                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + uploadImage(file): String             ‚îÇ
‚îÇ + deleteImage(publicId): void           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      ValidationUtil                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + validateEmail(email): boolean         ‚îÇ
‚îÇ + validatePassword(pwd): boolean        ‚îÇ
‚îÇ + sanitizeInput(input): String          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Relaciones entre Clases (Principales)

### **Dependencias**
```
Controller ‚Üí Service ‚Üí Repository ‚Üí Entity
```

### **Composici√≥n**
```
Request ‚óÜ‚îÄ‚îÄ‚Üí Material (muchos)
Request ‚óÜ‚îÄ‚îÄ‚Üí Image (muchos)
User ‚óÜ‚îÄ‚îÄ‚Üí Request (muchos)
Organization ‚óÜ‚îÄ‚îÄ‚Üí Request (muchos)
```

### **Agregaci√≥n**
```
Category ‚óá‚îÄ‚îÄ‚Üí Post (muchos)
User ‚óá‚îÄ‚îÄ‚Üí Feedback (muchos)
```

---

## Patrones de Dise√±o Aplicados

### **1. Repository Pattern**
- Abstrae el acceso a datos
- `UserRepository`, `RequestRepository`, etc.

### **2. Service Layer Pattern**
- L√≥gica de negocio centralizada
- `UserService`, `RequestService`, etc.

### **3. MVC (Model-View-Controller)**
- **Model:** Entidades JPA
- **View:** Templates Thymeleaf
- **Controller:** Controllers Spring

### **4. Dependency Injection**
- Spring gestiona todas las dependencias
- `@Autowired`, `@Service`, `@Repository`

### **5. DTO Pattern** (Conceptual)
- Transferencia de datos entre capas
- Evita exponer entidades directamente

### **6. Builder Pattern** (Lombok)
- Construcci√≥n de objetos complejos
- `@Builder` en entidades

### **7. Strategy Pattern** (Roles)
- Diferentes comportamientos seg√∫n rol
- USER, ORGANIZATION, ADMIN

---

## Principios SOLID Aplicados

### **S - Single Responsibility**
- Cada servicio tiene una responsabilidad √∫nica
- `UserService` solo gestiona usuarios

### **O - Open/Closed**
- Extensible mediante herencia (`BaseEntity`)
- Cerrado para modificaci√≥n

### **L - Liskov Substitution**
- Todas las entidades pueden sustituir a `BaseEntity`

### **I - Interface Segregation**
- Repositorios espec√≠ficos por entidad
- No interfaces monol√≠ticas

### **D - Dependency Inversion**
- Controllers dependen de abstracciones (Services)
- No de implementaciones concretas

---

## Diagrama de Secuencia (Ejemplo: Crear Solicitud)

```
Usuario ‚Üí UserController ‚Üí RequestService ‚Üí RequestRepository ‚Üí DB
   ‚îÇ            ‚îÇ                ‚îÇ                 ‚îÇ             ‚îÇ
   ‚îÇ‚îÄ‚îÄcreate()‚îÄ‚îÄ‚Üí‚îÇ                ‚îÇ                 ‚îÇ             ‚îÇ
   ‚îÇ            ‚îÇ‚îÄ‚îÄvalidate()‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ                 ‚îÇ             ‚îÇ
   ‚îÇ            ‚îÇ                ‚îÇ‚îÄ‚îÄsave()‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ             ‚îÇ
   ‚îÇ            ‚îÇ                ‚îÇ                 ‚îÇ‚îÄ‚îÄINSERT‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ
   ‚îÇ            ‚îÇ                ‚îÇ                 ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄOK‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
   ‚îÇ            ‚îÇ                ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄRequest‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ             ‚îÇ
   ‚îÇ            ‚îÇ‚îÄ‚îÄnotify()‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ÜíNotificationSvc  ‚îÇ             ‚îÇ
   ‚îÇ            ‚îÇ‚Üê‚îÄ‚îÄ‚îÄ‚îÄview‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                 ‚îÇ             ‚îÇ
   ‚îÇ‚Üê‚îÄ‚îÄ‚îÄredirect‚îÇ                ‚îÇ                 ‚îÇ             ‚îÇ
```

---

## Notas de Arquitectura

### **Capas de la Aplicaci√≥n**
1. **Presentaci√≥n:** Controllers + Thymeleaf
2. **Negocio:** Services
3. **Persistencia:** Repositories + JPA
4. **Dominio:** Entities

### **Flujo de Datos**
```
HTTP Request ‚Üí Controller ‚Üí Service ‚Üí Repository ‚Üí Database
                    ‚Üì
              Thymeleaf View ‚Üê Model
```

### **Transaccionalidad**
- `@Transactional` en m√©todos de servicio
- Rollback autom√°tico en excepciones

### **Validaci√≥n**
- `@Valid` en controllers
- Bean Validation en entidades
- Validaci√≥n custom en services
